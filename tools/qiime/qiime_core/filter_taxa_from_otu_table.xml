<tool id="qiime_filter_taxa_from_otu_table" name="Filter taxa from otu table" version="@WRAPPER_VERSION@.0">
    <description>Filter taxa from an OTU table</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <version_command>filter_taxa_from_otu_table.py --version</version_command>
    <command detect_errors="aggressive"><![CDATA[
        filter_taxa_from_otu_table.py
            --input_otu_table_fp '$input_otu_table_fp'
            --output_otu_table_fp '$output_otu_table_fp'
            #if str($positive_taxa) != ''
                --positive_taxa '$positive_taxa'
            #end if
            #if str($negative_taxa) != ''
                --negative_taxa '$negative_taxa'
            #end if
            --metadata_field '$metadata_field'
    ]]></command>
    <inputs>
        <param argument="--input_otu_table_fp" type="data" format="biom1" label="Input OTU table to filter"/>
        <param argument="--positive_taxa" type="text" label="Comma-separated list of taxa to retain" optional="True"/>
        <param argument="--negative_taxa" type="text" label="Comma-separated list of taxa to discard" optional="True"/>
        <param argument="--metadata_field" type="text" value="taxonomy" label="Observation metadata identifier to filter based on"/>
    </inputs>
    <outputs>
        <data name="output_otu_table_fp" format="biom1" label="${tool.name} on ${on_string}: Filtered OTU table"/>
    </outputs>
    <tests>
    </tests>
    <help><![CDATA[
**What it does**

This scripts filters an OTU table based on taxonomic metadata. It can be applied for positive filtering (i.e., keeping only certain taxa), negative filtering (i.e., discarding only certain taxa), or both at the same time.
    ]]></help>
    <citations>
        <expand macro="citations"/>
    </citations>
</tool>
