<tool id="qiime_make_otu_table" name="make otu table" version="@WRAPPER_VERSION@.0">

    <description>Make OTU table</description>

    <macros>
        <import>macros.xml</import>
    </macros>

    <expand macro="requirements"/>

    <version_command>make_otu_table.py --version</version_command>

    <command detect_errors="aggressive"><![CDATA[
        make_otu_table.py
            -i '$otu_map_fp'
            -o '$output_biom_fp'
            #if str($taxonomy) != 'None':
             -t '$taxonomy'
            #end if
            #if str($exclude_otus_fp) != 'None':
             -e '$exclude_otus_fp'
            #end if
    ]]></command>

    <inputs>
        <param name="otu_map_fp" type="data" argument="-i/--otu_map_fp" label="OTU map" help="the output from pick_otus.py"/>
        <param name="taxonomy" type="data" optional="True" argument="-t/--taxonomy:" label="Taxonomy assignment, containing the assignments of taxons to sequences" help="i.e., resulting txt file from assign_taxonomy.py"/>
        <param name="exclude_otus_fp" type="data" optional="True" argument="-e/--exclude_otus_fp" label="File listing OTU identifiers that should not be included in the OTU table" help="(e.g., the output of identify_chimeric_seqs.py) or a fasta file where seq ids should be excluded (e.g., failures fasta file from align_seqs.py)"/>
    </inputs>

    <outputs>
        <data name="output_biom_fp" format="txt" label="${tool.name} on ${on_string}: otu_table.biom"/>
    </outputs>

    <tests>
        <test>
        </test>
    </tests>

    <help><![CDATA[
**What it does**

The script `make_otu_table.py <http://qiime.org/scripts/make_otu_table.html>`_ tabulates the number of times an OTU is found in each
sample, and adds the taxonomic predictions for each OTU in the last column if a taxonomy file is supplied.

The output of `make_otu_table.py <http://qiime.org/scripts/make_otu_table.html>`_ is a `biom file <http://biom-format.org/>`_, where the columns correspond to
Samples and rows correspond to OTUs and the number of times a sample appears in a particular OTU.

More information about this tool is available on
`QIIME documentation <http://qiime.org/scripts/make_otu_table.html>`_.
    ]]></help>

    <citations>
        <expand macro="citations"/>
    </citations>
</tool>
