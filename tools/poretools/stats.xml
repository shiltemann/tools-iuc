<tool id="poretools_stats" name="stats" version="@TOOL_VERSION@.0">
    <description>collect read size statistics</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <expand macro="version_command" />
    <command detect_errors="aggressive"><![CDATA[
mkdir fast5files &&

#for $f in $fast5in
    ln -s '$f' 'fast5files/${f.name}' &&
#end for

poretools stats
--type $type
$full_tsv
fast5files/
> '$stats'
    ]]></command>
    <inputs>
        <param name="fast5in" type="data" format="h5" multiple="true" label="Fast5 files" />
        <expand macro="type_param" />
        <param name="full_tsv" argument="--full-tsv" type="boolean" truevalue="--full-tsv" falsevalue="" label="Verbose output?" />
    </inputs>
    <outputs>
        <data name="stats" format="tabular" label="${tool.name} on ${on_string}: read statistics" />
    </outputs>
    <tests>
        <test>
            <param name="fast5in" value="test.fast5,test2.fast5"/>
            <output name="stats" file="stats.txt" ftype="tabular" />
        </test>
        <test>
            <param name="fast5in" value="test.fast5,test2.fast5"/>
            <param name="type" value="rev" />
            <param name="full_tsv" value="--full-tsv" />
            <output name="stats" file="stats_full.txt" ftype="tabular" />
        </test>
    </tests>
    <help><![CDATA[
@HELP_GENERAL@

**Command Documentation**

Collect read size statistics from a set of FAST5 files.es.

For more information about this command, see command_doc_ and command_doc2_

.. _command_doc: http://poretools.readthedocs.io/en/latest/content/examples.html#poretools-stats
    ]]></help>
    <expand macro="citations"/>
</tool>
